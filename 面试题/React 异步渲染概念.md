## React异步渲染

* 异步渲染就是Concurrent模式， Concurrent模式是一组react 的新功能，可以保持应用响应，并根据用户的设备和性能进行适当的调整


### Js是单线程的
### 浏览器内核是多线程的
### 浏览器是按帧刷新的，一帧里包括 事件接受 js运行 布局 重绘等任务
### JS线程和渲染线程是互斥的 必须Js运行完毕 UI渲染进程才能去跟进
### 对于浏览器事件 会把事件添加到任务队列末尾，等待js线程处理


* 联想平时的研发，会感觉渲染的时候很卡  鼠标键盘的输入都没有反应，是因为线程被js运行阻塞了，无法进行渲染进程
* Concurrent就是为了解决这个问题，以前每一帧都会把js运行完毕才会去渲染进程，现在可以被阶段，一个时间段内如果js没有运行完毕，则先运行ui渲染进程
* 总结一下 no-concurrent 的js是连续并且顺序性的  Concurrent是可中断的 可恢复  可以设置优先级的


* Time Slicing

* 执行任务期间随时可以叫停 ，使得react可以在性能及其查的机器上，也能保持良好的体验
* React渲染时候不阻塞现在的进程
* 设备足够好，渲染就是同步的，设备不好，但是体验上感觉还算是灵敏的
* 虽然是异步渲染，但是你看到的还是整体渲染，而不是一行一行的渲染


* Suspense
* 解决React从出生到现在就存在的异步副作用问题，使用的是异步但同步的写法
* 新的API 可以使任何state更新停止，等待满足条件再渲染
* 在任何一个组件里放置异步获取数据
* 网速快的时候 设置 整体dom接收到数据之后在进行渲染
* 网速慢的时候，精确到单个组件的等待和更新再进行渲染